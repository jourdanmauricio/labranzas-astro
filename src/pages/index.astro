---
import Card from '../components/Card.astro';
import Divider from '../components/Divider.astro';
import Menu from '../components/menu/Menu.astro';
import MenuMobile from '../components/menu/MenuMobile.astro';
import Layout from '../layouts/Layout.astro';

interface productsFeatures {
  id: number;
  prod_id: number;
  new_product: string;
  featured: boolean;
  best_sellers: boolean;
  tren: boolean;
  price: number;
  available_quantity: number;
  title: string;
  thumbnail: string;
  seller_custom_field: string;
}

const data = await fetch(`${import.meta.env.VITE_BACKEND_API}/productsweb`);
const products = await data.json();
console.log('Products', products);

const newProducts = products.filter(
  (prod: productsFeatures) => prod.new_product === '1'
);
---

<Layout>
  <MenuMobile />
  <div
    class="w-full h-60 sm:h-[400px] lg:h-[500px] bg-[url('/images/hero_1024_640_opt.jpg')] bg-black/[.03] bg-blend-soft-light bg-cover bg-center md:bg-[center_bottom_20%]"
  >
    <div class="pr-12 pl-[40%] py-8 sm:py-20 lg:py-36 text-center">
      <h1 class="text-white">Labranzas</h1>
      <h3 class="text-white py-2 sm:py-10">Insumos para eventos</h3>
      <h3 class="text-white">Decoración para el hogar</h3>
    </div>
  </div>

  <Menu />
  <h1 class="mt-16 text-xl font-semibold text-center text-gray-900">
    Labranzas Tienda Online - Decoración para el hogar e insumos para eventos
  </h1>

  <section class="py-16">
    <Divider text="Últimas publicaciones" />

    <div
      class="text-center p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-2 gap-y-16 place-items-center"
    >
      {
        newProducts.map((product: productsFeatures) => (
          <Card product={product} />
        ))
      }
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="p-8 flex flex-col items-center md:flex-row gap-8">
      <article
        class="flex flex-col gap-4 basis-1/2 text-gray-800 leading-5 tracking-wider"
      >
        <h2 class="text-center text-xl font-medium">
          Decoración para el hogar
        </h2>
        <p>
          Cumpleaños de 15, casamientos, eventos empresariales, regalos fin de
          año, etc. Lorem ipsum dolor sit amet consectetur adipisicing elit.
          Magnam facilis assumenda, dolores quo atque iusto sapiente ullam
          itaque nam ducimus dicta suscipit delectus dignissimos eos quas alias,
          consequuntur et a.
        </p>
        <ul>
          <li>Almohadones</li>
          <li>Espejos</li>
          <li>Centros de mesa</li>
          <li>Decoración del salón</li>
        </ul>
      </article>

      <article class="basis-1/2">
        <div class="relative">
          <img
            class="rounded-md"
            src="/images/candle_640_opt.jpg"
            alt="Productos decoración para el hogar"
          />

          <button
            class="w-2/3 absolute py-2 border-2 bg-white bg-opacity-60 hover:bg-opacity-40 border-purple-600 text-purple-600 rounded-md left-1/2 -translate-x-1/2 top-2/3"
            >Ver productos</button
          >
        </div>
      </article>
    </div>
  </section>

  <section class="py-16">
    <Divider text="Más vendidos" />

    <div
      class="text-center p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-2 gap-y-16 place-items-center"
    >
      {products.map((product: productsFeatures) => <Card product={product} />)}
    </div>
  </section>

  <section class="py-16 bg-white">
    <div class="p-8 flex items-center flex-col md:flex-row gap-8">
      <article class="basis-1/2">
        <div class="relative">
          <img
            class="rounded-md"
            src="/images/eventos_640_opt.jpg"
            alt="Productos para eventos"
          />
          <button
            class="w-2/3 absolute py-2 border-2 bg-white bg-opacity-60 hover:bg-opacity-40 border-purple-600 text-purple-600 rounded-md left-1/2 -translate-x-1/2 top-2/3"
            >Ver productos</button
          >
        </div>
      </article>

      <article
        class="flex flex-col gap-4 basis-1/2 leading-5 tracking-wider text-gray-800"
      >
        <h2 class="text-center text-xl font-medium">Insumos para eventos</h2>
        <p>
          Cumpleaños de 15, casamientos, eventos empresariales, regalos fin de
          año, etc. Lorem ipsum dolor sit amet consectetur adipisicing elit.
          Magnam facilis assumenda, dolores quo atque iusto sapiente ullam
          itaque nam ducimus dicta suscipit delectus dignissimos eos quas alias,
          consequuntur et a.
        </p>
        <ul>
          <li>Centros de mesa</li>
          <li>Souvenirs</li>
          <li>Caminos de mesa</li>
          <li>Decoración del salón</li>
        </ul>
      </article>
    </div>
  </section>

  <section class="py-16">
    <Divider text="Destacados" />
    <div
      class="text-center p-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-x-2 gap-y-16 place-items-center"
    >
      {products.map((product: productsFeatures) => <Card product={product} />)}
    </div>
  </section>
</Layout>
